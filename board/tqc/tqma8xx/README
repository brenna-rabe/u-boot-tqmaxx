U-Boot for the TQ-Systems i.MX8[D,Q]XP TQMa8Xx SOM family

Supported variants
==================

TQMa8X[D,Q]P / 1 GiB DDR3L ECC / i.MX8[D,Q]XP C0

configs:

tqma8xdp_mba8xx_defconfig
tqma8xdp_mba8xx_mfg_defconfig
tqma8xqp_mba8xx_defconfig
tqma8xqp_mba8xx_mfg_defconfig

TQMa8X[D,Q]P4 / 2 GiB LPDDR4 / i.MX8[D,Q]XP C0

configs:

tqma8xdp4_mba8xx_defconfig
tqma8xdp4_mba8xx_mfg_defconfig
tqma8xqp4_mba8xx_defconfig
tqma8xqp4_mba8xx_mfg_defconfig

Quick Start
===========

- Build the ARM Trusted firmware binary
- Get SCU firmware (must match board variant and RAM config)
- Get SECO firmware
- Build U-Boot
- Flash the binary into the SD card
- Boot

Get and Build the ARM Trusted firmware
======================================

$ git clone https://source.codeaurora.org/external/imx/imx-atf
$ cd imx-atf/
$ git checkout origin/imx_5.4.47_2.2.0 -b imx_5.4.47_2.2.0
$ make PLAT=imx8qx bl31

Get SECO firmware (mx8qxc0-ahab-container.img)
==============================================

$ wget https://www.nxp.com/lgfiles/NMG/MAD/YOCTO/imx-seco-3.7.1.bin
$ chmod +x imx-seco-3.7.1.bin
$ ./imx-seco-3.7.1.bin

Get SCFW
========

TQMa8X[D,Q]P: mx8qx-tqma8xqp-mba8xx-scfw-tcm.bin
TQMa8X[D,Q]P4: mx8qx-tqma8xqp4-mba8xx-scfw-tcm.bin

wget https://github.com/tq-systems/meta-tq/blob/zeus-tqma8/dynamic-layers/fsl-bsp-release/recipes-bsp/imx-sc-firmware/imx-sc-firmware/imx-sc-firmware-tq-TQMa8.NXP-v1.6.0.B4894.0030.tar.gz
tar -xf ./imx-sc-firmware-tq-TQMa8.NXP-v1.6.0.B4894.0030.tar.gz

Prepare build folder
====================

Copy the following binaries to U-Boot folder:

$ cp imx-atf/build/imx8qx/release/bl31.bin .
$ cp imx-seco-3.7.1/firmware/seco/mx8qxc0-ahab-container.img ./ahab-container.img
$ cp imx-sc-firmware-tq-TQMa8.NXP-v1.6.0.B4894.0030/mx8qx-tqma8xqp[4]-mba8xx-scfw-tcm.bin ./mx8qx-mba8xx-scfw-tcm.bin

Build U-Boot
============
$ make tqma8x[d,q]p[4]_mba8xx_defconfig
$ make flash.bin

Flash the binary into the SD card
=================================

Burn the flash.bin binary to SD card offset 32KB:

$ sudo dd if=flash.bin of=/dev/sd[x] bs=1024 seek=32

Boot
====

Set Boot switch SW2[4:1]: 1100.
